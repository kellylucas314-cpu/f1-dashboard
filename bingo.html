<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>F1 Bingo üèéÔ∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #E8002D;
    --dark: #0a0a0a;
    --card-bg: #111111;
    --cell-bg: #1a1a1a;
    --cell-hover: #222222;
    --marked: #E8002D;
    --free: #1a3a1a;
    --border: #333;
    --text: #f0f0f0;
    --muted: #888;
    --gold: #FFD700;
    --green: #00C851;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: var(--dark);
    color: var(--text);
    font-family: 'Inter', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Checkered header stripe */
  .checker-stripe {
    height: 8px;
    background: repeating-linear-gradient(90deg, #fff 0px, #fff 16px, #000 16px, #000 32px);
    opacity: 0.15;
  }

  header {
    text-align: center;
    padding: 2rem 1rem 1rem;
    position: relative;
  }
  .title {
    font-family: 'Orbitron', monospace;
    font-size: clamp(2rem, 8vw, 4rem);
    font-weight: 900;
    letter-spacing: 4px;
    background: linear-gradient(135deg, #fff 0%, #E8002D 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: none;
  }
  .subtitle {
    color: var(--muted);
    font-size: 0.85rem;
    margin-top: 0.5rem;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .controls {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    flex-wrap: wrap;
    padding: 1rem;
  }
  .btn {
    font-family: 'Orbitron', monospace;
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    padding: 0.6rem 1.2rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
  }
  .btn-primary { background: var(--red); color: #fff; }
  .btn-primary:hover { background: #ff1a44; transform: translateY(-1px); }
  .btn-secondary { background: #222; color: var(--text); border: 1px solid #444; }
  .btn-secondary:hover { background: #2a2a2a; }
  .btn-ghost { background: transparent; color: var(--muted); border: 1px solid #333; }
  .btn-ghost:hover { color: var(--text); border-color: #555; }

  /* Bingo status */
  .status-bar {
    text-align: center;
    min-height: 2rem;
    margin: 0 auto 0.5rem;
    padding: 0 1rem;
  }
  .status-text {
    font-family: 'Orbitron', monospace;
    font-size: 0.8rem;
    color: var(--muted);
    letter-spacing: 1px;
  }
  .status-text.bingo {
    color: var(--gold);
    font-size: 1.4rem;
    animation: flashBingo 0.5s ease-in-out infinite alternate;
  }
  @keyframes flashBingo {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0.7; transform: scale(1.05); }
  }

  /* Board */
  .board-wrapper {
    display: flex;
    justify-content: center;
    padding: 0 0.5rem 1rem;
  }
  .board {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 4px;
    width: 100%;
    max-width: 560px;
    background: #000;
    border: 2px solid #333;
    border-radius: 8px;
    padding: 4px;
  }

  /* Column headers B I N G O */
  .col-header {
    font-family: 'Orbitron', monospace;
    font-size: 1.3rem;
    font-weight: 900;
    text-align: center;
    padding: 0.5rem 0;
    color: var(--red);
    letter-spacing: 2px;
    background: #0f0f0f;
    border-radius: 4px;
  }

  .cell {
    aspect-ratio: 1;
    background: var(--cell-bg);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 0.3rem;
    font-size: clamp(0.45rem, 1.5vw, 0.65rem);
    font-weight: 500;
    line-height: 1.25;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    border: 1px solid transparent;
    user-select: none;
    color: var(--text);
  }
  .cell:hover:not(.free-space) {
    background: var(--cell-hover);
    border-color: #555;
    transform: scale(1.02);
  }
  .cell.marked {
    background: var(--marked) !important;
    color: #fff;
    font-weight: 700;
    border-color: #ff4466;
  }
  .cell.marked::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
    border-radius: 4px;
  }
  .cell.free-space {
    background: var(--free) !important;
    border: 1px solid #2a5a2a;
    cursor: default;
    color: #5dff5d;
    font-weight: 700;
    font-size: clamp(0.4rem, 1.3vw, 0.6rem);
  }
  .cell.bingo-line {
    background: var(--gold) !important;
    color: #000 !important;
    font-weight: 700;
    animation: pulse 0.6s ease-in-out infinite alternate;
  }
  @keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.04); }
  }

  /* Called numbers / marks tracker */
  .marked-count {
    text-align: center;
    color: var(--muted);
    font-size: 0.75rem;
    padding: 0.25rem;
    letter-spacing: 1px;
  }

  /* Ideas pool */
  .pool-section {
    max-width: 560px;
    margin: 1rem auto;
    padding: 0 0.75rem;
  }
  .pool-title {
    font-family: 'Orbitron', monospace;
    font-size: 0.65rem;
    color: var(--muted);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }
  .pool-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
  }
  .pool-tag {
    font-size: 0.65rem;
    padding: 0.2rem 0.5rem;
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 4px;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.15s;
    user-select: none;
  }
  .pool-tag:hover { border-color: var(--red); color: var(--text); }
  .pool-tag.used { opacity: 0.3; cursor: default; }

  /* Confetti */
  .confetti-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 999;
    overflow: hidden;
  }
  .confetti-piece {
    position: absolute;
    width: 10px;
    height: 10px;
    top: -10px;
    animation: confettiFall linear forwards;
  }
  @keyframes confettiFall {
    to { transform: translateY(110vh) rotate(720deg); opacity: 0; }
  }

  /* Bottom stripe */
  footer {
    text-align: center;
    padding: 1.5rem;
    color: #333;
    font-size: 0.7rem;
    letter-spacing: 1px;
  }
</style>
</head>
<body>

<div class="checker-stripe"></div>
<div id="confetti-container" class="confetti-container"></div>

<div style="text-align:center; padding: 0.75rem;">
  <a href="index.html" style="font-family: 'Orbitron', monospace; font-size: 0.65rem; color: #555; text-decoration: none; letter-spacing: 2px; text-transform: uppercase;">‚Üê Back to F1 Dashboard</a>
</div>

<header>
  <div class="title">F1 BINGO</div>
  <div class="subtitle">üèéÔ∏è 2025 Season ¬∑ Click squares to mark ¬∑ Get BINGO to win</div>
</header>

<div class="controls">
  <button class="btn btn-primary" onclick="newCard()">üîÄ New Random Card</button>
  <button class="btn btn-secondary" onclick="loadOriginal()">üì∏ Kelly's Card</button>
  <button class="btn btn-ghost" onclick="resetMarks()">‚Ü∫ Reset Marks</button>
</div>

<div class="status-bar">
  <div class="status-text" id="status-text">Mark squares as they happen during the race!</div>
</div>

<div class="board-wrapper">
  <div class="board" id="board">
    <!-- Headers -->
    <div class="col-header">B</div>
    <div class="col-header">I</div>
    <div class="col-header">N</div>
    <div class="col-header">G</div>
    <div class="col-header">O</div>
    <!-- Cells injected by JS -->
  </div>
</div>

<div class="marked-count" id="marked-count"></div>

<div class="pool-section">
  <div class="pool-title">üìã Ideas Pool ‚Äî click to add to custom card</div>
  <div class="pool-grid" id="pool-grid"></div>
</div>

<footer>Made with ü¶â by Kip ¬∑ Kelly's F1 Bingo 2025</footer>

<script>
// Kelly's original card ‚Äî exactly as written
const KELLYS_CARD = [
  "Boo Max /\nGP Radio\nRant",
  "Charles\nRace Win",
  "Cristian\nHorner\nSpotted\nin Paddock",
  "Ferrari\nBlows\nStrategy",
  "Max/GP Radio\nFight",

  "Team\nDouble\nDNF",
  "Ollie\nBearman\nPodium",
  "Lando\nBlows\nA Start",
  "Max +\nGeorge\nCrash",
  "Papaya\nRules\nF*cks\nOscar",

  "Bernie\nEcclestone\nDies",
  "Photoshoot:\nCharles\nLooking Sad",
  "FREE:\nMax Wins\nA Race",
  "Lewis\nPodium",
  "Checo\nTop 5\nFinish",

  "McLaren\nStrategy\nF*ck Up",
  "George\nTalks Sh*t\nAbout\nMax Press",
  "Lance Stroll\nOut-Qualifies\nFernando",
  "George\nWins\n5 Races",
  "Alonso\nTop 5\nFinish",

  "Charles\nDNF üò≠",
  "Max\n5x WDC",
  "Kimi\nTakes\nSomeone\nOut (DNF)",
  "FREE:\nMax Talks\nSh*t About\nFIA",
  "Carlos\nPodium",
];

const FREE_INDICES = [12, 23]; // positions that are free spaces

// Full pool of ideas (from the photo + extras)
const IDEAS_POOL = [
  "0 DNF Race",
  "Last Corner\nOvertake",
  "Black Flag",
  "Triple Crown\nWeekend",
  "Engine\non Fire",
  "Home Win\nRace",
  "Unexpected\nPodium",
  "Botched\nPitstop",
  "Reserve\nDriver Races",
  "Rookie\nWins Race",
  "Teammates\nCollide",
  "Mid Season\nDriver Swap",
  "New World\nChampion",
  "Team Order\nControversy",
  "First Time\nRace Winner",
  "10 Second\nPenalty",
  "Red Flag\nStops Race",
  "Risky Strategy\nPays Off",
  "Risky Strategy\nRuins Race",
  "Grand Prix\nPostponed",
  "3+ Cars\nCrash on Lap 1",
  "Mid-Race\nRain Storm",
  "Car Loses\nWheel",
  "Sub 2 Second\nPit Stop",
  "Swear Words\nPenalty",
  "Podium Lost\nDue to Penalty",
  "Loss of\nFront Wing",
  "Driver Has\nNo Water",
  "Animal\non Track",
  "Safety Car\nRuins Race",
  "VSC Deployed",
  "DRS Failure",
  "Power Unit\nPenalty",
  "Two Drivers\nSame Team\nBattle",
  "Grid Penalty\nfor No Reason",
  "Max Takes\nPole",
  "Rain in Monaco",
  "F1 TV\nCuts Away\nat Worst Time",
  "Commentator\nSays 'It's\nLights Out!'",
  "Fastest Lap\nBonanza Point",
  "Hamilton\nComplains\non Radio",
  "Lando\nCries",
  "Norris\n'I Need More Pace'",
];

let currentCard = [...KELLYS_CARD];
let markedCells = new Set();
let freeIndices = [...FREE_INDICES];

function renderBoard() {
  const board = document.getElementById('board');
  // Keep headers (first 5 children)
  const headers = Array.from(board.children).slice(0, 5);
  board.innerHTML = '';
  headers.forEach(h => board.appendChild(h));

  // Add fresh headers since innerHTML wiped them
  board.innerHTML = `
    <div class="col-header">B</div>
    <div class="col-header">I</div>
    <div class="col-header">N</div>
    <div class="col-header">G</div>
    <div class="col-header">O</div>
  `;

  currentCard.forEach((text, i) => {
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.textContent = text.replace(/\\n/g, '\n');
    cell.style.whiteSpace = 'pre-line';

    if (freeIndices.includes(i)) {
      cell.classList.add('free-space', 'marked');
    } else if (markedCells.has(i)) {
      cell.classList.add('marked');
    }

    cell.addEventListener('click', () => toggleCell(i, cell));
    board.appendChild(cell);
  });

  updateStatus();
  updateMarkedCount();
}

function toggleCell(index, cell) {
  if (freeIndices.includes(index)) return; // can't unmark free spaces
  if (markedCells.has(index)) {
    markedCells.delete(index);
    cell.classList.remove('marked');
  } else {
    markedCells.add(index);
    cell.classList.add('marked');
  }
  updateStatus();
  updateMarkedCount();
}

function updateMarkedCount() {
  const total = markedCells.size + freeIndices.length;
  document.getElementById('marked-count').textContent = `${total} / 25 squares marked`;
}

function getMarkedSet() {
  const s = new Set(markedCells);
  freeIndices.forEach(i => s.add(i));
  return s;
}

function checkBingo() {
  const marked = getMarkedSet();
  const lines = [];

  // Rows
  for (let r = 0; r < 5; r++) {
    const line = [r*5, r*5+1, r*5+2, r*5+3, r*5+4];
    if (line.every(i => marked.has(i))) lines.push(line);
  }
  // Cols
  for (let c = 0; c < 5; c++) {
    const line = [c, c+5, c+10, c+15, c+20];
    if (line.every(i => marked.has(i))) lines.push(line);
  }
  // Diagonals
  const d1 = [0, 6, 12, 18, 24];
  const d2 = [4, 8, 12, 16, 20];
  if (d1.every(i => marked.has(i))) lines.push(d1);
  if (d2.every(i => marked.has(i))) lines.push(d2);

  return lines;
}

function updateStatus() {
  const lines = checkBingo();
  const statusEl = document.getElementById('status-text');
  const cells = document.querySelectorAll('.cell');

  // Clear bingo highlights
  cells.forEach(c => c.classList.remove('bingo-line'));

  if (lines.length > 0) {
    statusEl.className = 'status-text bingo';
    statusEl.textContent = `üèÜ BINGO! You got ${lines.length} line${lines.length > 1 ? 's' : ''}! üèÜ`;
    // Highlight winning cells
    const allCells = Array.from(document.querySelectorAll('.cell'));
    lines.flat().forEach(i => {
      if (allCells[i]) allCells[i].classList.add('bingo-line');
    });
    launchConfetti();
  } else {
    statusEl.className = 'status-text';
    const count = getMarkedSet().size;
    if (count >= 5) {
      statusEl.textContent = `${count} squares marked ‚Äî keep going! üèéÔ∏è`;
    } else {
      statusEl.textContent = 'Mark squares as they happen during the race!';
    }
  }
}

function resetMarks() {
  markedCells.clear();
  document.getElementById('status-text').className = 'status-text';
  document.getElementById('status-text').textContent = 'Mark squares as they happen during the race!';
  renderBoard();
}

function loadOriginal() {
  currentCard = [...KELLYS_CARD];
  freeIndices = [12, 23];
  markedCells.clear();
  renderBoard();
}

function newCard() {
  // Pick 22 random from pool + 3 free spaces
  const shuffled = [...IDEAS_POOL].sort(() => Math.random() - 0.5);
  const picked = shuffled.slice(0, 22);
  // Insert 3 free spaces at fixed positions (4, 12, 23)
  const card = [];
  let poolIdx = 0;
  for (let i = 0; i < 25; i++) {
    if ([4, 12, 23].includes(i)) {
      const freeLabels = ["FREE:\nLando Says\nSomething\nAnnoying", "FREE:\nAnimal\non Track", "FREE:\nDRS\nFailure"];
      card.push(freeLabels[[4, 12, 23].indexOf(i)]);
    } else {
      card.push(picked[poolIdx++] || 'TBD');
    }
  }
  currentCard = card;
  freeIndices = [4, 12, 23];
  markedCells.clear();
  renderBoard();
}

function renderPool() {
  const grid = document.getElementById('pool-grid');
  IDEAS_POOL.forEach(idea => {
    const tag = document.createElement('div');
    tag.className = 'pool-tag';
    tag.textContent = idea.replace(/\n/g, ' ');
    tag.title = 'Click to add to a custom cell (coming soon)';
    grid.appendChild(tag);
  });
}

function launchConfetti() {
  const container = document.getElementById('confetti-container');
  container.innerHTML = '';
  const colors = ['#E8002D', '#FFD700', '#ffffff', '#00C851', '#0066ff'];
  for (let i = 0; i < 80; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    const color = colors[Math.floor(Math.random() * colors.length)];
    const size = Math.random() * 10 + 5;
    piece.style.cssText = `
      left: ${Math.random() * 100}%;
      width: ${size}px;
      height: ${size}px;
      background: ${color};
      border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
      animation-duration: ${Math.random() * 2 + 2}s;
      animation-delay: ${Math.random() * 0.5}s;
      transform: rotate(${Math.random() * 360}deg);
      opacity: ${Math.random() * 0.5 + 0.5};
    `;
    container.appendChild(piece);
  }
  setTimeout(() => container.innerHTML = '', 4000);
}

// Init
renderPool();
loadOriginal();
</script>
</body>
</html>
